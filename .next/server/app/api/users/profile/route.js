"use strict";(()=>{var e={};e.id=807,e.ids=[807],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},66759:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>_,patchFetch:()=>Z,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var a={};r.r(a),r.d(a,{PUT:()=>d});var o=r(49303),t=r(88716),i=r(60670),n=r(87070),u=r(20728),p=r(57104);async function d(e){try{let s=await e.json(),r=p.t5.safeParse(s);if(!r.success)return n.NextResponse.json({error:r.error.flatten()},{status:400});let{userId:a,profileImage:o,preferences:t,onboardingCompleted:i}=r.data,d=await u._.user.update({where:{id:a},data:{profileImage:o,preferredIndustries:t,onboardingCompleted:i??!0}});return n.NextResponse.json({user:{id:d.id,profileImage:d.profileImage,onboardingCompleted:d.onboardingCompleted}},{status:200})}catch(e){return n.NextResponse.json({error:"Failed to complete profile"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:t.x.APP_ROUTE,page:"/api/users/profile/route",pathname:"/api/users/profile",filename:"route",bundlePath:"app/api/users/profile/route"},resolvedPagePath:"/Users/bharat/Desktop/upmentor/src/app/api/users/profile/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:g}=l,_="/api/users/profile/route";function Z(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},20728:(e,s,r)=>{r.d(s,{_:()=>o});let a=require("@prisma/client"),o=globalThis.prisma??new a.PrismaClient({log:["error"]})},57104:(e,s,r)=>{r.d(s,{Ej:()=>n,$v:()=>p,Tr:()=>d,uV:()=>u,t5:()=>l,gY:()=>i,sn:()=>c});var a,o=r(65630);let t={custom:"custom"};a||(a={});let i=o.Ry({name:o.Z_().min(2),email:o.Z_().email(),password:o.Z_().min(8).regex(/[A-Z]/,"Must include uppercase").regex(/[a-z]/,"Must include lowercase").regex(/[0-9]/,"Must include number").regex(/[^A-Za-z0-9]/,"Must include special character"),confirmPassword:o.Z_(),primaryLanguage:o.Z_().min(2),academicLevel:o.Km(["school","college"])}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),n=o.Ry({userId:o.Z_().uuid(),academicLevel:o.Km(["school","college"]),schoolName:o.Z_().optional(),board:o.Z_().optional(),classGrade:o.Z_().optional(),stream:o.Z_().optional(),subjects:o.IX(o.Z_()).optional(),extracurricular:o.IX(o.Z_()).optional(),universityName:o.Z_().optional(),degreeType:o.Z_().optional(),major:o.Z_().optional(),minor:o.Z_().optional(),semester:o.Rx().optional(),cgpa:o.Rx().optional(),projects:o.IX(o.Z_()).optional(),internships:o.IX(o.Z_()).optional(),achievements:o.IX(o.Z_()).optional(),goals:o.IX(o.Z_()).optional(),challenges:o.IX(o.Z_()).optional()}).superRefine((e,s)=>{"school"===e.academicLevel?(e.schoolName||s.addIssue({code:t.custom,message:"schoolName required",path:["schoolName"]}),e.classGrade||s.addIssue({code:t.custom,message:"classGrade required",path:["classGrade"]}),(!e.subjects||e.subjects.length<3)&&s.addIssue({code:t.custom,message:"At least 3 subjects required",path:["subjects"]})):"college"!==e.academicLevel||(e.universityName||s.addIssue({code:t.custom,message:"universityName required",path:["universityName"]}),e.degreeType||s.addIssue({code:t.custom,message:"degreeType required",path:["degreeType"]}),e.major||s.addIssue({code:t.custom,message:"major required",path:["major"]}),e.semester||s.addIssue({code:t.custom,message:"semester required",path:["semester"]}),e.cgpa||0===e.cgpa||s.addIssue({code:t.custom,message:"cgpa required",path:["cgpa"]}))}),u=o.Ry({userId:o.Z_().uuid(),primaryLanguage:o.Z_().min(2),languagesSpoken:o.IX(o.Z_().min(2)).min(1)}),p=o.Ry({userId:o.Z_().uuid(),preferredRoles:o.IX(o.Z_().min(2)).min(1),targetCompanies:o.IX(o.Z_().min(2)).optional(),desiredLocations:o.IX(o.Z_().min(2)).optional(),workPreferences:o.Z_().optional(),careerTimeline:o.Z_().optional(),specificConcerns:o.IX(o.Z_().min(2)).optional()}),d=o.Ry({userId:o.Z_().uuid(),interests:o.IX(o.Z_().min(2)).min(1),challenges:o.IX(o.Z_().min(2)).optional(),goals:o.IX(o.Z_().min(2)).optional()}),l=o.Ry({userId:o.Z_().uuid(),profileImage:o.Z_().url().optional(),preferences:o.IX(o.Z_().min(2)).optional(),onboardingCompleted:o.O7().optional()}),c=o.Ry({userId:o.Z_().uuid(),roleType:o.Km(["STUDENT","MENTOR","ADMIN","SUPPORT"]),permissions:o.IX(o.Z_().min(2)).optional()})}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[948,972,630],()=>r(66759));module.exports=a})();