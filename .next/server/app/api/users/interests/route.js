"use strict";(()=>{var e={};e.id=517,e.ids=[517],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57346:(e,s,a)=>{a.r(s),a.d(s,{originalPathname:()=>_,patchFetch:()=>Z,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var r={};a.r(r),a.d(r,{PUT:()=>p});var t=a(49303),o=a(88716),i=a(60670),n=a(87070),u=a(20728),d=a(57104);async function p(e){try{let s=await e.json(),a=d.Tr.safeParse(s);if(!a.success)return n.NextResponse.json({error:a.error.flatten()},{status:400});let{userId:r,interests:t,challenges:o,goals:i}=a.data,p=await u._.user.update({where:{id:r},data:{interests:t}});return await u._.academicDetails.updateMany({where:{userId:r},data:{challenges:o,goals:i}}),n.NextResponse.json({user:{id:p.id,interests:t},challenges:o,goals:i},{status:200})}catch(e){return n.NextResponse.json({error:"Failed to update interests and challenges"},{status:500})}}let l=new t.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/users/interests/route",pathname:"/api/users/interests",filename:"route",bundlePath:"app/api/users/interests/route"},resolvedPagePath:"/Users/bharat/Desktop/upmentor/src/app/api/users/interests/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:g}=l,_="/api/users/interests/route";function Z(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},20728:(e,s,a)=>{a.d(s,{_:()=>t});let r=require("@prisma/client"),t=globalThis.prisma??new r.PrismaClient({log:["error"]})},57104:(e,s,a)=>{a.d(s,{Ej:()=>n,$v:()=>d,Tr:()=>p,uV:()=>u,t5:()=>l,gY:()=>i,sn:()=>c});var r,t=a(65630);let o={custom:"custom"};r||(r={});let i=t.Ry({name:t.Z_().min(2),email:t.Z_().email(),password:t.Z_().min(8).regex(/[A-Z]/,"Must include uppercase").regex(/[a-z]/,"Must include lowercase").regex(/[0-9]/,"Must include number").regex(/[^A-Za-z0-9]/,"Must include special character"),confirmPassword:t.Z_(),primaryLanguage:t.Z_().min(2),academicLevel:t.Km(["school","college"])}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),n=t.Ry({userId:t.Z_().uuid(),academicLevel:t.Km(["school","college"]),schoolName:t.Z_().optional(),board:t.Z_().optional(),classGrade:t.Z_().optional(),stream:t.Z_().optional(),subjects:t.IX(t.Z_()).optional(),extracurricular:t.IX(t.Z_()).optional(),universityName:t.Z_().optional(),degreeType:t.Z_().optional(),major:t.Z_().optional(),minor:t.Z_().optional(),semester:t.Rx().optional(),cgpa:t.Rx().optional(),projects:t.IX(t.Z_()).optional(),internships:t.IX(t.Z_()).optional(),achievements:t.IX(t.Z_()).optional(),goals:t.IX(t.Z_()).optional(),challenges:t.IX(t.Z_()).optional()}).superRefine((e,s)=>{"school"===e.academicLevel?(e.schoolName||s.addIssue({code:o.custom,message:"schoolName required",path:["schoolName"]}),e.classGrade||s.addIssue({code:o.custom,message:"classGrade required",path:["classGrade"]}),(!e.subjects||e.subjects.length<3)&&s.addIssue({code:o.custom,message:"At least 3 subjects required",path:["subjects"]})):"college"!==e.academicLevel||(e.universityName||s.addIssue({code:o.custom,message:"universityName required",path:["universityName"]}),e.degreeType||s.addIssue({code:o.custom,message:"degreeType required",path:["degreeType"]}),e.major||s.addIssue({code:o.custom,message:"major required",path:["major"]}),e.semester||s.addIssue({code:o.custom,message:"semester required",path:["semester"]}),e.cgpa||0===e.cgpa||s.addIssue({code:o.custom,message:"cgpa required",path:["cgpa"]}))}),u=t.Ry({userId:t.Z_().uuid(),primaryLanguage:t.Z_().min(2),languagesSpoken:t.IX(t.Z_().min(2)).min(1)}),d=t.Ry({userId:t.Z_().uuid(),preferredRoles:t.IX(t.Z_().min(2)).min(1),targetCompanies:t.IX(t.Z_().min(2)).optional(),desiredLocations:t.IX(t.Z_().min(2)).optional(),workPreferences:t.Z_().optional(),careerTimeline:t.Z_().optional(),specificConcerns:t.IX(t.Z_().min(2)).optional()}),p=t.Ry({userId:t.Z_().uuid(),interests:t.IX(t.Z_().min(2)).min(1),challenges:t.IX(t.Z_().min(2)).optional(),goals:t.IX(t.Z_().min(2)).optional()}),l=t.Ry({userId:t.Z_().uuid(),profileImage:t.Z_().url().optional(),preferences:t.IX(t.Z_().min(2)).optional(),onboardingCompleted:t.O7().optional()}),c=t.Ry({userId:t.Z_().uuid(),roleType:t.Km(["STUDENT","MENTOR","ADMIN","SUPPORT"]),permissions:t.IX(t.Z_().min(2)).optional()})}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[948,972,630],()=>a(57346));module.exports=r})();