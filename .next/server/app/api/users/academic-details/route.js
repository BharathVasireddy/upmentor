"use strict";(()=>{var e={};e.id=722,e.ids=[722],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9212:(e,a,s)=>{s.r(a),s.d(a,{originalPathname:()=>_,patchFetch:()=>Z,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var r={};s.r(r),s.d(r,{PUT:()=>c});var o=s(49303),t=s(88716),i=s(60670),n=s(87070),u=s(20728),d=s(57104);async function c(e){try{let a=await e.json(),s=d.Ej.safeParse(a);if(!s.success)return n.NextResponse.json({error:s.error.flatten()},{status:400});let r=s.data,o=await u._.academicDetails.upsert({where:{userId:r.userId},update:{...r},create:{...r}});return await u._.user.update({where:{id:r.userId},data:{onboardingCompleted:!1}}),n.NextResponse.json({academicDetails:o},{status:200})}catch(e){return n.NextResponse.json({error:"Failed to update academic details"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:t.x.APP_ROUTE,page:"/api/users/academic-details/route",pathname:"/api/users/academic-details",filename:"route",bundlePath:"app/api/users/academic-details/route"},resolvedPagePath:"/Users/bharat/Desktop/upmentor/src/app/api/users/academic-details/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:g}=p,_="/api/users/academic-details/route";function Z(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},20728:(e,a,s)=>{s.d(a,{_:()=>o});let r=require("@prisma/client"),o=globalThis.prisma??new r.PrismaClient({log:["error"]})},57104:(e,a,s)=>{s.d(a,{Ej:()=>n,$v:()=>d,Tr:()=>c,uV:()=>u,t5:()=>p,gY:()=>i,sn:()=>l});var r,o=s(65630);let t={custom:"custom"};r||(r={});let i=o.Ry({name:o.Z_().min(2),email:o.Z_().email(),password:o.Z_().min(8).regex(/[A-Z]/,"Must include uppercase").regex(/[a-z]/,"Must include lowercase").regex(/[0-9]/,"Must include number").regex(/[^A-Za-z0-9]/,"Must include special character"),confirmPassword:o.Z_(),primaryLanguage:o.Z_().min(2),academicLevel:o.Km(["school","college"])}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),n=o.Ry({userId:o.Z_().uuid(),academicLevel:o.Km(["school","college"]),schoolName:o.Z_().optional(),board:o.Z_().optional(),classGrade:o.Z_().optional(),stream:o.Z_().optional(),subjects:o.IX(o.Z_()).optional(),extracurricular:o.IX(o.Z_()).optional(),universityName:o.Z_().optional(),degreeType:o.Z_().optional(),major:o.Z_().optional(),minor:o.Z_().optional(),semester:o.Rx().optional(),cgpa:o.Rx().optional(),projects:o.IX(o.Z_()).optional(),internships:o.IX(o.Z_()).optional(),achievements:o.IX(o.Z_()).optional(),goals:o.IX(o.Z_()).optional(),challenges:o.IX(o.Z_()).optional()}).superRefine((e,a)=>{"school"===e.academicLevel?(e.schoolName||a.addIssue({code:t.custom,message:"schoolName required",path:["schoolName"]}),e.classGrade||a.addIssue({code:t.custom,message:"classGrade required",path:["classGrade"]}),(!e.subjects||e.subjects.length<3)&&a.addIssue({code:t.custom,message:"At least 3 subjects required",path:["subjects"]})):"college"!==e.academicLevel||(e.universityName||a.addIssue({code:t.custom,message:"universityName required",path:["universityName"]}),e.degreeType||a.addIssue({code:t.custom,message:"degreeType required",path:["degreeType"]}),e.major||a.addIssue({code:t.custom,message:"major required",path:["major"]}),e.semester||a.addIssue({code:t.custom,message:"semester required",path:["semester"]}),e.cgpa||0===e.cgpa||a.addIssue({code:t.custom,message:"cgpa required",path:["cgpa"]}))}),u=o.Ry({userId:o.Z_().uuid(),primaryLanguage:o.Z_().min(2),languagesSpoken:o.IX(o.Z_().min(2)).min(1)}),d=o.Ry({userId:o.Z_().uuid(),preferredRoles:o.IX(o.Z_().min(2)).min(1),targetCompanies:o.IX(o.Z_().min(2)).optional(),desiredLocations:o.IX(o.Z_().min(2)).optional(),workPreferences:o.Z_().optional(),careerTimeline:o.Z_().optional(),specificConcerns:o.IX(o.Z_().min(2)).optional()}),c=o.Ry({userId:o.Z_().uuid(),interests:o.IX(o.Z_().min(2)).min(1),challenges:o.IX(o.Z_().min(2)).optional(),goals:o.IX(o.Z_().min(2)).optional()}),p=o.Ry({userId:o.Z_().uuid(),profileImage:o.Z_().url().optional(),preferences:o.IX(o.Z_().min(2)).optional(),onboardingCompleted:o.O7().optional()}),l=o.Ry({userId:o.Z_().uuid(),roleType:o.Km(["STUDENT","MENTOR","ADMIN","SUPPORT"]),permissions:o.IX(o.Z_().min(2)).optional()})}};var a=require("../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),r=a.X(0,[948,972,630],()=>s(9212));module.exports=r})();