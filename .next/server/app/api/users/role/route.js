"use strict";(()=>{var e={};e.id=312,e.ids=[312],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},97617:(e,s,a)=>{a.r(s),a.d(s,{originalPathname:()=>_,patchFetch:()=>Z,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var r={};a.r(r),a.d(r,{POST:()=>p});var o=a(49303),t=a(88716),i=a(60670),n=a(87070),u=a(20728),l=a(57104);async function p(e){try{let s=await e.json(),a=l.sn.safeParse(s);if(!a.success)return n.NextResponse.json({error:a.error.flatten()},{status:400});let{userId:r,roleType:o,permissions:t}=a.data,i=await u._.userRole.upsert({where:{userId:r},update:{roleType:o,permissions:t},create:{userId:r,roleType:o,permissions:t}});return n.NextResponse.json({userRole:i},{status:200})}catch(e){return n.NextResponse.json({error:"Failed to assign role"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:t.x.APP_ROUTE,page:"/api/users/role/route",pathname:"/api/users/role",filename:"route",bundlePath:"app/api/users/role/route"},resolvedPagePath:"/Users/bharat/Desktop/upmentor/src/app/api/users/role/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g}=c,_="/api/users/role/route";function Z(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},20728:(e,s,a)=>{a.d(s,{_:()=>o});let r=require("@prisma/client"),o=globalThis.prisma??new r.PrismaClient({log:["error"]})},57104:(e,s,a)=>{a.d(s,{Ej:()=>n,$v:()=>l,Tr:()=>p,uV:()=>u,t5:()=>c,gY:()=>i,sn:()=>d});var r,o=a(65630);let t={custom:"custom"};r||(r={});let i=o.Ry({name:o.Z_().min(2),email:o.Z_().email(),password:o.Z_().min(8).regex(/[A-Z]/,"Must include uppercase").regex(/[a-z]/,"Must include lowercase").regex(/[0-9]/,"Must include number").regex(/[^A-Za-z0-9]/,"Must include special character"),confirmPassword:o.Z_(),primaryLanguage:o.Z_().min(2),academicLevel:o.Km(["school","college"])}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),n=o.Ry({userId:o.Z_().uuid(),academicLevel:o.Km(["school","college"]),schoolName:o.Z_().optional(),board:o.Z_().optional(),classGrade:o.Z_().optional(),stream:o.Z_().optional(),subjects:o.IX(o.Z_()).optional(),extracurricular:o.IX(o.Z_()).optional(),universityName:o.Z_().optional(),degreeType:o.Z_().optional(),major:o.Z_().optional(),minor:o.Z_().optional(),semester:o.Rx().optional(),cgpa:o.Rx().optional(),projects:o.IX(o.Z_()).optional(),internships:o.IX(o.Z_()).optional(),achievements:o.IX(o.Z_()).optional(),goals:o.IX(o.Z_()).optional(),challenges:o.IX(o.Z_()).optional()}).superRefine((e,s)=>{"school"===e.academicLevel?(e.schoolName||s.addIssue({code:t.custom,message:"schoolName required",path:["schoolName"]}),e.classGrade||s.addIssue({code:t.custom,message:"classGrade required",path:["classGrade"]}),(!e.subjects||e.subjects.length<3)&&s.addIssue({code:t.custom,message:"At least 3 subjects required",path:["subjects"]})):"college"!==e.academicLevel||(e.universityName||s.addIssue({code:t.custom,message:"universityName required",path:["universityName"]}),e.degreeType||s.addIssue({code:t.custom,message:"degreeType required",path:["degreeType"]}),e.major||s.addIssue({code:t.custom,message:"major required",path:["major"]}),e.semester||s.addIssue({code:t.custom,message:"semester required",path:["semester"]}),e.cgpa||0===e.cgpa||s.addIssue({code:t.custom,message:"cgpa required",path:["cgpa"]}))}),u=o.Ry({userId:o.Z_().uuid(),primaryLanguage:o.Z_().min(2),languagesSpoken:o.IX(o.Z_().min(2)).min(1)}),l=o.Ry({userId:o.Z_().uuid(),preferredRoles:o.IX(o.Z_().min(2)).min(1),targetCompanies:o.IX(o.Z_().min(2)).optional(),desiredLocations:o.IX(o.Z_().min(2)).optional(),workPreferences:o.Z_().optional(),careerTimeline:o.Z_().optional(),specificConcerns:o.IX(o.Z_().min(2)).optional()}),p=o.Ry({userId:o.Z_().uuid(),interests:o.IX(o.Z_().min(2)).min(1),challenges:o.IX(o.Z_().min(2)).optional(),goals:o.IX(o.Z_().min(2)).optional()}),c=o.Ry({userId:o.Z_().uuid(),profileImage:o.Z_().url().optional(),preferences:o.IX(o.Z_().min(2)).optional(),onboardingCompleted:o.O7().optional()}),d=o.Ry({userId:o.Z_().uuid(),roleType:o.Km(["STUDENT","MENTOR","ADMIN","SUPPORT"]),permissions:o.IX(o.Z_().min(2)).optional()})}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[948,972,630],()=>a(97617));module.exports=r})();