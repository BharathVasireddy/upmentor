"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},40706:(e,a,s)=>{s.r(a),s.d(a,{originalPathname:()=>Z,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>_,staticGenerationAsyncStorage:()=>g});var r={};s.r(r),s.d(r,{POST:()=>l});var t=s(49303),o=s(88716),i=s(60670),n=s(87070),u=s(20728),d=s(57104),p=s(98691);async function l(e){try{let a=await e.json(),s=d.gY.safeParse(a);if(!s.success)return n.NextResponse.json({error:s.error.flatten()},{status:400});let{name:r,email:t,password:o,primaryLanguage:i,academicLevel:l}=s.data;if(await u._.user.findUnique({where:{email:t}}))return n.NextResponse.json({error:"Email already registered"},{status:409});let c=await p.ZP.hash(o,10),m=await u._.user.create({data:{name:r,email:t,passwordHash:c,primaryLanguage:i,academicLevel:l,onboardingCompleted:!1,isVerified:!1}});return n.NextResponse.json({user:{id:m.id,email:m.email,name:m.name}},{status:201})}catch(e){return n.NextResponse.json({error:"Registration failed"},{status:500})}}let c=new t.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/Users/bharat/Desktop/upmentor/src/app/api/auth/register/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:_}=c,Z="/api/auth/register/route";function h(){return(0,i.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:g})}},20728:(e,a,s)=>{s.d(a,{_:()=>t});let r=require("@prisma/client"),t=globalThis.prisma??new r.PrismaClient({log:["error"]})},57104:(e,a,s)=>{s.d(a,{Ej:()=>n,$v:()=>d,Tr:()=>p,uV:()=>u,t5:()=>l,gY:()=>i,sn:()=>c});var r,t=s(65630);let o={custom:"custom"};r||(r={});let i=t.Ry({name:t.Z_().min(2),email:t.Z_().email(),password:t.Z_().min(8).regex(/[A-Z]/,"Must include uppercase").regex(/[a-z]/,"Must include lowercase").regex(/[0-9]/,"Must include number").regex(/[^A-Za-z0-9]/,"Must include special character"),confirmPassword:t.Z_(),primaryLanguage:t.Z_().min(2),academicLevel:t.Km(["school","college"])}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),n=t.Ry({userId:t.Z_().uuid(),academicLevel:t.Km(["school","college"]),schoolName:t.Z_().optional(),board:t.Z_().optional(),classGrade:t.Z_().optional(),stream:t.Z_().optional(),subjects:t.IX(t.Z_()).optional(),extracurricular:t.IX(t.Z_()).optional(),universityName:t.Z_().optional(),degreeType:t.Z_().optional(),major:t.Z_().optional(),minor:t.Z_().optional(),semester:t.Rx().optional(),cgpa:t.Rx().optional(),projects:t.IX(t.Z_()).optional(),internships:t.IX(t.Z_()).optional(),achievements:t.IX(t.Z_()).optional(),goals:t.IX(t.Z_()).optional(),challenges:t.IX(t.Z_()).optional()}).superRefine((e,a)=>{"school"===e.academicLevel?(e.schoolName||a.addIssue({code:o.custom,message:"schoolName required",path:["schoolName"]}),e.classGrade||a.addIssue({code:o.custom,message:"classGrade required",path:["classGrade"]}),(!e.subjects||e.subjects.length<3)&&a.addIssue({code:o.custom,message:"At least 3 subjects required",path:["subjects"]})):"college"!==e.academicLevel||(e.universityName||a.addIssue({code:o.custom,message:"universityName required",path:["universityName"]}),e.degreeType||a.addIssue({code:o.custom,message:"degreeType required",path:["degreeType"]}),e.major||a.addIssue({code:o.custom,message:"major required",path:["major"]}),e.semester||a.addIssue({code:o.custom,message:"semester required",path:["semester"]}),e.cgpa||0===e.cgpa||a.addIssue({code:o.custom,message:"cgpa required",path:["cgpa"]}))}),u=t.Ry({userId:t.Z_().uuid(),primaryLanguage:t.Z_().min(2),languagesSpoken:t.IX(t.Z_().min(2)).min(1)}),d=t.Ry({userId:t.Z_().uuid(),preferredRoles:t.IX(t.Z_().min(2)).min(1),targetCompanies:t.IX(t.Z_().min(2)).optional(),desiredLocations:t.IX(t.Z_().min(2)).optional(),workPreferences:t.Z_().optional(),careerTimeline:t.Z_().optional(),specificConcerns:t.IX(t.Z_().min(2)).optional()}),p=t.Ry({userId:t.Z_().uuid(),interests:t.IX(t.Z_().min(2)).min(1),challenges:t.IX(t.Z_().min(2)).optional(),goals:t.IX(t.Z_().min(2)).optional()}),l=t.Ry({userId:t.Z_().uuid(),profileImage:t.Z_().url().optional(),preferences:t.IX(t.Z_().min(2)).optional(),onboardingCompleted:t.O7().optional()}),c=t.Ry({userId:t.Z_().uuid(),roleType:t.Km(["STUDENT","MENTOR","ADMIN","SUPPORT"]),permissions:t.IX(t.Z_().min(2)).optional()})}};var a=require("../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),r=a.X(0,[948,972,630,691],()=>s(40706));module.exports=r})();